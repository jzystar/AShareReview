# A股市场数据分析工具

基于akshare库开发的A股市场数据获取和分析工具，专注于短线交易数据分析。

## 功能特性

1. **连板股分析** - 获取5连涨停板以上的股票，包含封板资金、封板时间等详细信息
2. **涨幅排名** - 分别获取近10、20、30、50个交易日涨幅前5名股票  
3. **市场统计** - 获取当天成交量、成交额、上证指数涨幅
4. **涨跌停统计** - 使用专门接口精确统计涨停、跌停数量和赚钱效应、炸板率
5. **历史表现** - 分析昨日涨停股、炸板股今日表现
6. **盘中极值** - 获取当天收盘相对高低点的极值股票
7. **板块分析** - 获取当天涨幅最大的板块
8. **跌幅分析** - 获取跌幅统计和重跌股票分析
9. **历史数据** - 自动保存每日分析结果，支持历史对比查看

## 安装和使用

### 环境要求
- Python 3.12+
- uv 包管理器

### 安装依赖
```bash
uv sync
```

### 运行程序
```bash
# 运行每日分析并保存数据
uv run python fetch_data.py

# 查看指定日期的历史数据
uv run python view_history.py --date 20250822

# 查看最近7天的数据摘要
uv run python view_history.py --summary 7
```

## 数据存储

每次运行分析程序时，数据会自动保存到 `data/` 目录下：
- **文件格式**：JSON (结构化，便于程序读取和人工查看)
- **命名规则**：`ashare_analysis_YYYYMMDD.json`
- **数据内容**：
  - 分析日期和时间
  - 完整的分析结果
  - 所有功能模块数据
  - 近7日历史对比

### JSON格式优势
1. **完整保存** - 保留所有嵌套数据结构
2. **易于读取** - Python原生支持，便于后续分析
3. **人类可读** - 格式清晰，可直接查看
4. **历史对比** - 便于对比不同日期数据趋势

## 数据来源

本项目使用 [akshare](https://github.com/akfamily/akshare) 开源财经数据接口库获取数据。

### 主要接口
- `stock_zt_pool_em()` - 涨停股池（精确统计）
- `stock_zt_pool_dtgc_em()` - 跌停股池（精确统计）  
- `stock_zt_pool_zbgc_em()` - 炸板股池（精确统计）
- `stock_zt_pool_previous_em()` - 昨日涨停股池

## 项目结构

```
ashare/
├── fetch_data.py          # 主分析程序
├── view_history.py        # 历史数据查看工具
├── test_limit_pools.py    # 测试脚本
├── data/                  # 数据存储目录
│   └── ashare_analysis_YYYYMMDD.json
├── pyproject.toml         # 项目配置
├── CLAUDE.md              # 项目指导文档
└── README.md              # 说明文档
```

## 注意事项

- 建议在交易时间或收盘后运行，确保数据的准确性
- 部分数据接口可能需要网络代理，如遇连接问题请检查网络环境
- 涨停跌停统计已优化，能正确处理不同板块的涨停幅度（主板10%、创业板/科创板20%、北交所30%）
- 数据获取失败的日期会在历史摘要中标记为*，便于识别
- 数据仅供参考，投资有风险，入市需谨慎
- 数据文件会累积增长，建议定期清理老旧数据

## 使用示例

### 每日分析流程
```bash
# 1. 运行每日分析
uv run python fetch_data.py

# 2. 查看当日结果
uv run python view_history.py --date 20250822

# 3. 查看近期趋势
uv run python view_history.py --summary 7
```

### 输出示例
```
【5连涨停以上股票】
  1. {'代码': '605303', '名称': '园林股份', '连板天数': 5, '封板资金': 430665632}
  2. {'代码': '603626', '名称': '科森科技', '连板天数': 6, '封板资金': 42963919}

【近7日市场概况】
日期       涨停 跌停 赚钱效应 炸板率 上证涨幅 | 昨涨停数 平均表现 上涨率 炸板表现
---------------------------------------------------------------------------
20250822    0    0    0.00%   0.00%    0.00% |       0    0.00%   0.00%    0.00%
20250821   80    4   51.04%  22.92%   -0.15% |      23   -1.28%  25.61%   -3.45%
20250820   56    2   52.51%  24.03%    1.11% |      59    5.72%  65.15%    0.01%
20250819   25    2   64.89%  11.36%   -1.16% |      39    0.13%  51.19%   -7.87%
```