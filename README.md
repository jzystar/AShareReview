# A股数据获取与短线交易分析工具

基于 [akshare](https://github.com/akfamily/akshare) 开源财经数据接口库开发的A股市场数据获取和分析工具，专注于每日收盘后的数据统计和短线交易指标计算。

## 项目概述

这是一个专门为A股短线交易者开发的数据分析工具，通过调用akshare接口获取A股数据（包括创业板、科创板和北交所股票），对每日市场表现进行全面分析，为短线交易决策提供数据支持。

## 核心功能

### 📊 连板股分析
- **5连涨停以上股票** - 获取超强势连板股，包含封板资金、封板时间等详细信息

### 📈 历史涨幅分析 （未完成）
- **近10/20/30/50日最大涨幅前5** - 分析不同周期内的强势股票表现

### 🏪 市场整体统计
- **成交量与量比** - 当日总成交量、量比数据
- **上证指数涨幅** - 大盘整体表现指标

### 🔴🟢 涨跌停精确统计
- **涨停/跌停数量** - 使用专门接口精确统计，正确处理不同板块涨停幅度
- **赚钱效应与炸板率** - 关键短线交易指标计算

### 📅 昨日股票今日表现
- **昨日涨停股表现** - 涨停股次日持续性分析  
- **昨日炸板股表现** - 炸板股修复情况跟踪
- **昨日连板股表现** - 连板股延续性统计

### 🎯 盘中极值分析
- **最强反弹股** - 收盘价相对当日最低点涨幅最大的5个股票
- **最大回撤股** - 收盘价相对当日最高点跌幅最大的5个股票

### 🏷️ 热点板块分析
- **涨停集中板块** - 涨停数量+高涨幅(>10%)股票数量最多的3个题材
- **涨幅最大板块** - 当日涨幅最大的前5个题材板块

### 📉 风险监控指标
- **深度调整股** - 近3天跌幅超过20%的股票数量统计 （未完成）
- **市场跌幅分位** - 当日跌幅最大第60个股票的跌幅（市场恐慌度指标）

### 💾 数据持久化
- **历史数据保存** - 所有分析结果自动保存，支持历史复盘和趋势对比

## 快速开始

### 环境要求
- **Python**: 3.12+
- **包管理器**: uv (推荐) 或 pip
- **操作系统**: Windows/macOS/Linux

### 安装步骤

1. **克隆项目**
```bash
git clone <repository-url>
cd ashare
```

2. **安装依赖**
```bash
# 使用 uv (推荐)
uv sync

# 或使用传统方式
pip install -r requirements.txt
```

3. **运行数据分析**
```bash
# 执行每日数据获取和分析
uv run python fetch_data.py
```

### 主要命令

```bash
# 运行完整的市场分析
uv run python fetch_data.py

# 查看历史数据
uv run python view_history.py --date 20250829

# 查看近期市场摘要
uv run python view_history.py --summary 7
```

## 数据存储与输出

### 存储格式
每次运行分析后，数据自动保存至多个位置：

- **JSON文件**: `data/ashare_analysis_YYYYMMDD.json`
  - 结构化数据，便于程序读取和API调用
  - 包含完整的原始数据和计算结果
  - 支持历史数据查询和趋势分析

- **Excel文件**: `复盘数据2025.xlsx` 
  - 人性化的表格格式，便于手工查看
  - 按日期组织，支持数据筛选和图表制作
  - 适合非技术人员阅读和分析

- **日志文件**: `logs/ashare_analysis_YYYYMMDD.log`
  - 详细的程序运行日志
  - 接口调用状态和错误信息
  - 便于调试和问题排查

### 数据特点
- **实时性**: 每日收盘后获取最新数据
- **完整性**: 涵盖所有13个核心功能模块
- **持续性**: 自动累积历史数据，支持长期趋势分析
- **可靠性**: 多重数据验证，确保数据准确性

## 技术架构

### 数据来源
- **主要数据源**: [akshare](https://github.com/akfamily/akshare) 开源财经数据接口库
- **官方文档**: https://akshare.akfamily.xyz/
- **接口文档**: https://akshare.akfamily.xyz/tutorial.html

### 核心依赖
```python
akshare>=1.17.35    # 财经数据接口库
pandas>=2.3.1       # 数据处理和分析
numpy>=2.3.2        # 数值计算
openpyxl>=3.1.5     # Excel文件操作  
requests>=2.32.4    # HTTP请求处理
```

### 关键数据接口
- `stock_zt_pool_em()` - 涨停股池数据
- `stock_zt_pool_dtgc_em()` - 跌停股池数据
- `stock_zt_pool_zbgc_em()` - 炸板股池数据  
- `stock_zt_pool_previous_em()` - 昨日涨停股数据
- `stock_zh_a_hist()` - 个股历史行情数据
- `index_zh_a_hist()` - 指数历史数据

## 项目结构

```
ashare/
├── fetch_data.py                      # 🔥 核心数据分析程序
├── data/                              # 📁 数据存储目录
│   ├── ashare_analysis_20250828.json # JSON格式日数据
│   └── ashare_analysis_20250829.json # 
├── logs/                              # 📋 日志文件目录
│   ├── ashare_analysis_20250828.log  # 程序运行日志
│   └── ashare_analysis_20250829.log  # 
├── 复盘数据2025.xlsx                   # 📊 Excel格式数据汇总
├── pyproject.toml                     # ⚙️  项目配置和依赖
├── uv.lock                            # 🔒 依赖版本锁定
├── CLAUDE.md                          # 🤖 项目开发指导文档  
├── TODO.md                            # 📝 任务和改进计划
└── README.md                          # 📖 项目说明文档
```

## 使用建议

### ⏰ 最佳运行时间
- **推荐时间**: 交易日 15:30 - 18:00 (收盘后数据最完整)
- **避免时间**: 开盘前和盘中运行 (数据可能不完整)

### 🌐 网络环境
- 确保网络连接稳定，部分接口可能需要科学上网
- 如遇数据获取失败，程序会自动重试并记录日志

### 📊 数据准确性
- **涨跌停统计**: 已优化适配不同板块 (主板10%、创业板/科创板20%、北交所30%)
- **数据验证**: 多重校验确保数据质量
- **异常处理**: 数据获取失败会在日志中详细记录

### 💾 存储管理  
- 数据文件会持续累积，建议定期备份重要数据
- 可删除过旧的日志文件以节省磁盘空间

## 运行示例

### 💼 日常使用流程
```bash
# 1. 执行完整市场分析 (每日15:30后运行)
uv run python fetch_data.py

# 2. 查看程序运行状态
tail -f logs/ashare_analysis_$(date +%Y%m%d).log

# 3. 检查数据文件
ls -la data/ashare_analysis_*.json
```

### 📊 典型输出示例
```
=== A股市场分析 (2025-08-29) ===

【5连涨停以上股票】
  1. 605303 园林股份 (连板: 5天, 封板资金: 4.3亿)
  2. 603626 科森科技 (连板: 6天, 封板资金: 4296万)

【市场整体情况】
  • 上证指数涨幅: +0.85%
  • 涨停股票: 45只 | 跌停股票: 3只  
  • 赚钱效应: 65.22% | 炸板率: 15.56%

【昨日涨停今日表现】  
  • 昨涨停股数: 38只
  • 平均表现: +2.15%
  • 继续上涨: 26只 (68.42%)

【热点板块TOP3】
  1. 人工智能 (涨停5只, 高涨幅12只)
  2. 新能源车 (涨停3只, 高涨幅8只)  
  3. 军工概念 (涨停2只, 高涨幅6只)
```

### 🔍 数据查看
```bash  
# 查看JSON格式原始数据
cat data/ashare_analysis_20250829.json | python -m json.tool

# 在Excel中查看汇总数据
open 复盘数据2025.xlsx  # macOS
# 或 start 复盘数据2025.xlsx  # Windows
```

## 风险提示

⚠️ **重要提醒**
- 本工具仅为数据分析和学习用途，**不构成投资建议**
- 股市投资有风险，入市需谨慎，请根据自身风险承受能力做出投资决策
- 历史数据不代表未来表现，任何投资决策应综合考虑多方面因素
- 作者不承担因使用本工具产生的任何投资损失责任

## 贡献与反馈

- **问题反馈**: 请提交 Issue 描述遇到的问题
- **功能建议**: 欢迎提出新的数据分析需求
- **代码贡献**: 遵循现有代码风格，提交 Pull Request

## 开发计划

查看 [TODO.md](TODO.md) 了解后续开发计划和功能roadmap。

---

**开发者**: 专注A股短线交易数据分析  
**更新时间**: 2025-08-29  
**版本**: v0.1.0